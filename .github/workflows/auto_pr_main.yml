name: Auto-Generate PR from develop to main

on:
  pull_request:
    types:
      - closed

jobs:
  generate-pr:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v3

    - name: Check if PR is merged to develop
      run: echo "PR ${{ github.event.pull_request.number }} ${{ github.event.pull_request.state }}"

    - name: Create Pull Request to main
      if: github.event.pull_request.merged && github.event.pull_request.base.ref == 'develop'
      uses: peter-evans/create-pull-request@v3
      with:
        branch: auto-pr-develop-to-main-${{ github.run_number }}
        title: Automatically Generated PR from develop to main
        body: |
          This pull request was automatically generated in response to a merged pull request from the develop branch.

          Changes:
          - Automatically generated changes...

        labels: auto-generated
      env:
        github_token: ${{ secrets.PAT_CREATE_PULL_REQUEST }}